TOP=../..

include $(TOP)/configure/CONFIG

# -------------------------------
# Build an Diamond Support Module
# -------------------------------

# This tells the compiler to ignore errors generated by EPICS includes.  We need
# this because the EPICS headers have non strict prototypes in places.
USR_CPPFLAGS += -isystem $(EPICS_BASE)/include

# Nice and strict...
USR_CXXFLAGS += -Werror
USR_CXXFLAGS += -Wall -Wextra
USR_CXXFLAGS += -Wundef
USR_CXXFLAGS += -Wshadow
USR_CXXFLAGS += -Wcast-align
USR_CXXFLAGS += -Wwrite-strings
USR_CXXFLAGS += -Wredundant-decls
USR_CXXFLAGS += -Wmissing-declarations
USR_CXXFLAGS += -Wno-unused-parameter
USR_CXXFLAGS += -D__STDC_VERSION__

LIBRARY_IOC += adExternal

# adExternalPlugin.dbd will be installed into <top>/dbd
DBD += adExternalPlugin.dbd

# The following are compiled and added to the support library
adExternal_SRCS += adExternalPlugin.cpp

include $(TOP)/configure/RULES
